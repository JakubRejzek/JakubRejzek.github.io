
/* CSS Document */
#myLittleTable
 {
 align="center";
  bgcolor="#33FFCC" ;
  background-color: bgcolor="#33FFCC";
 max-width: 80%;
  font-family: arial, sans-serif;
  border: 2px solid #222222;
  border-collapse: collapse;
 }
 td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}
thead tr
 {
     border: 4 px solid #000000;
     
 }
 button
 {
 width: 62%;
 height: 20%;
 font-size: 300%;
          
 }
 
 
 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
   <link rel="stylesheet" href="Formatovani.css" type="text/css">
    
    
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title>Money exchange rates</title>
  </head>
  <body>
         <p><strong>This table uses data from: <a href="https://webapi.developers.erstegroup.com/api/csas/public/sandbox/v2/rates/exchangerates?web-api-key=c52a0682-4806-4903-828f-6cc66508329e" target="_blank">https://webapi.developers.erstegroup.com</a></strong></p>
     <button align="center"; onClick="getDataIntoTable()">Click to view data in table</button>
     <table  class="dataTable" id="myLittleTable" cellspacing="10" cellpadding="10">
       <thead bgcolor="#33FFCC"; class="t_head">
       <tr onClick="debug()">
       <th>shortName</th>
       <th>validFrom</th>
       <th>name</th>
       <th>country</th>
       <th>amount</th>
       <th>valBuy</th>
       <th>valSell</th>
       <th>valMid</th>
       <th>currBuy</th>
       <th>currSell</th>
       <th>currMid</th>
       <th>move</th>
       <th>cnbMid</th>
       <th>version</th>
       </tr>
       </thead>
       <tbody class="t_body" id="table_data_body">
          
       </tbody>
     </table>  
      <script src="jsCode.js" type="text/javascript"></script>
       
  </body>                                                            
</html>

// JavaScript Document   

var tableBody = document.getElementById("table_data_body");
var webPageDataP = "";
var webPageData = "";
    
   getTextFromWebpage(0,"https://webapi.developers.erstegroup.com/api/csas/public/sandbox/v2/rates/exchangerates?web-api-key=c52a0682-4806-4903-828f-6cc66508329e");
   getTextFromWebpage(1,"/currentExchangeRates");
  // getTextFromWebpage("https://www.csast.csas.cz/webapi/api/v2/rates/exchangerates?web-api-key=86d63706-3a9c-4762-bd7a-415651cc26f8");
        
      function debug ()
      { 
      //loads raw webpage data
      tableBody.innerHTML =  changeJaDataIntoUseableForm(webPageDataP); 
       // tableBody.innerHTML = webPageDataP;  
      }
        
    function getDataIntoTable() {                
             tableBody.innerHTML =  changeJaDataIntoUseableForm(webPageData); 
             
              
        }
        function changeJaDataIntoUseableForm(data)
        {
             var processedData = data.replaceAll("[", "");
             processedData = processedData.replaceAll("}]","</th></tr>");
             
             processedData = processedData.replaceAll("{", "<tr>");
             processedData = processedData.replaceAll("},", "</th></tr>");
             processedData = processedData.replaceAll("}", "</tr>");
             
             //Can be replaced with a good regex expression of this kind: /"*{4,10}":/
             //But I didnï¿½t find a way to realize it.
             processedData = processedData.replaceAll("shortName", "<th>");
             processedData = processedData.replaceAll("validFrom", "<th>");
             processedData = processedData.replaceAll("name", "<th>");
             processedData = processedData.replaceAll("country", "<th>");
             processedData = processedData.replaceAll("amount", "<th>");
             processedData = processedData.replaceAll("valBuy", "<th>");
             processedData = processedData.replaceAll("valSell", "<th>");
             processedData = processedData.replaceAll("valMid", "<th>");
             processedData = processedData.replaceAll("currBuy", "<th>");
             processedData = processedData.replaceAll("currSell", "<th>");
             processedData = processedData.replaceAll("currMid", "<th>");
             processedData = processedData.replaceAll("move", "<th>");
             processedData = processedData.replaceAll("cnbMid", "<th>");
             processedData = processedData.replaceAll("version", "<th>");
             processedData = processedData.replaceAll(":", "");
             processedData = processedData.replaceAll("\"", "");
//----------------------------------------------------------------------------------
             processedData = processedData.replaceAll(",", "</th>");     
             
              return processedData;
        }
        
        async function getTextFromWebpage(source, file) 
        {
          let fetchedPage = await fetch(file);
          var myText = await fetchedPage.text();
          if(source === 0)
          {
             webPageDataP = myText;
          }
          else
          {
             webPageData = myText;
          }
          
        }
        

// JavaScript NODE Document
console.log("Hello world");

